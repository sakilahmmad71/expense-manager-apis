# ==============================================================================
# Production Environment Configuration - Expenser API
# ==============================================================================
# SECURITY WARNING: Never commit actual .env.production file to version control
# Copy this file to .env.production and update with your production values
# ==============================================================================

# ============================================
# APPLICATION SETTINGS
# ============================================
NODE_ENV=production
PORT=3000

# ============================================
# DATABASE CONFIGURATION
# ============================================
# SECURITY: Use strong, randomly generated passwords for production
# Generate: openssl rand -base64 32
POSTGRES_USER=expenseuser_prod
POSTGRES_PASSWORD=CHANGE_THIS_TO_STRONG_PASSWORD
POSTGRES_DB=expensedb_production
POSTGRES_PORT=5432

# DATABASE_URL format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
# In Docker network, host is the container name (postgres)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}?schema=public&connect_timeout=30

# ============================================
# JWT CONFIGURATION
# ============================================
# CRITICAL: Generate strong secrets for production
# Generate: openssl rand -hex 64
JWT_SECRET=CHANGE_THIS_TO_STRONG_RANDOM_SECRET_MINIMUM_32_CHARACTERS
JWT_EXPIRES_IN=7d

# ============================================
# SESSION CONFIGURATION (for OAuth)
# ============================================
# Generate: openssl rand -hex 64
SESSION_SECRET=CHANGE_THIS_TO_DIFFERENT_STRONG_RANDOM_SECRET

# ============================================
# GOOGLE OAUTH CONFIGURATION
# ============================================
# Get credentials from: https://console.cloud.google.com/
# Create OAuth 2.0 Client ID and add authorized redirect URIs
GOOGLE_CLIENT_ID=your-production-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-your-production-google-client-secret
GOOGLE_CALLBACK_URL=https://api.yourdomain.com/api/v1/auth/google/callback

# ============================================
# FRONTEND URL (for OAuth redirects)
# ============================================
# The URL where users will be redirected after OAuth login
FRONTEND_URL=https://app.yourdomain.com

# ============================================
# CORS CONFIGURATION
# ============================================
# Allow requests only from your production frontend
# Multiple origins: separate with commas (if supported by your CORS setup)
CORS_ORIGIN=https://app.yourdomain.com

# ============================================
# LOGGING CONFIGURATION
# ============================================
# Production: Use 'info' or 'warn' to reduce log volume
# Available levels: error, warn, info, http, verbose, debug, silly
LOG_LEVEL=info

# ============================================
# SECURITY CHECKLIST FOR PRODUCTION
# ============================================
# [ ] Replace ALL placeholder passwords and secrets with strong random values
# [ ] Use different secrets for JWT_SECRET and SESSION_SECRET
# [ ] Update GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET with production credentials
# [ ] Set GOOGLE_CALLBACK_URL to your production API domain
# [ ] Set FRONTEND_URL to your production app domain
# [ ] Set CORS_ORIGIN to your production app domain (must match FRONTEND_URL)
# [ ] Verify DATABASE_URL points to correct database
# [ ] Set LOG_LEVEL to 'info' or 'warn' (not 'debug')
# [ ] Ensure .env.production is in .gitignore
# [ ] Store secrets securely (use secrets manager in production)
# [ ] Enable SSL/TLS for database connections if using remote database
# [ ] Configure automated backups for PostgreSQL
# [ ] Set up monitoring and alerting
# [ ] Review and update CORS_ORIGIN if you have multiple frontends

# ============================================
# OPTIONAL: ADDITIONAL SECURITY
# ============================================
# Uncomment and configure if needed:

# Rate limiting (if using external rate limiter)
# RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
# RATE_LIMIT_MAX_REQUESTS=100

# SSL/TLS for database (if using external database)
# DATABASE_SSL=true
# DATABASE_SSL_CA=/path/to/ca-certificate.crt

# Email service (for password resets, notifications)
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-smtp-username
# SMTP_PASSWORD=your-smtp-password
# SMTP_FROM=noreply@yourdomain.com

# Sentry error tracking
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Redis session store (for multi-instance deployments)
# REDIS_URL=redis://redis:6379
# SESSION_STORE=redis
